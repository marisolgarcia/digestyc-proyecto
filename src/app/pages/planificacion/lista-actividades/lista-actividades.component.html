<p-toast position="bottom-center"></p-toast>

<div style="padding: 1rem">
  <div class="p-grid ui-fluid" style="padding:1rem;">
    <div class="p-col-9" style="padding:0;">
      <h1>Plan 2020</h1>
    </div>
    <div class="p-col-3 group-right" style="padding:0;">
      <a [routerLink]="['/listaActividades/crearActividad']" class="layout-config-button" style="color: #008100;"><i class="fa fa-plus-circle"></i></a>
      <a class="layout-config-button" style="color: #3E59AB;" (click)="filtrarDialog()"><i class="fa fa-search"></i></a>
    </div>

    <p-dialog header="Filtrar" [(visible)]="filtrar" [modal]="true" [baseZIndex]="10000" [style]="{width: '50vw'}" [contentStyle]="{'overflow':'visible'}">
      <div class="p-grid" style="padding-top:1rem;">
        <div class="p-col-12 p-md-12  ui-fluid">
          <div class="p-field p-grid">
            <label for="perspectiva" class="p-col-12">Perspectiva:</label>
            <div class="p-col-12">
              <p-dropdown inputId="perspectiva" [options]="perspectiva" placeholder="Todas" optionLabel="name"></p-dropdown>
            </div>
          </div>
          <div class="p-field p-grid">
            <label for="unidadLider" class="p-col-12">Unidad Lider:</label>
            <div class="p-col-12">
              <p-dropdown inputId="unidadLider" [options]="unidadLider" placeholder="Todas" optionLabel="name"></p-dropdown>
            </div>
          </div>
          <div class="p-field p-grid">
            <label for="unidadResponsable" class="p-col-12">Unidad Responsable:</label>
            <div class="p-col-12">
              <p-dropdown inputId="unidadResponsable" [options]="cargo" placeholder="Todos" optionLabel="name"></p-dropdown>
            </div>
          </div>
          <div class="p-field p-grid">
            <label for="fechaInicio" class="p-col-12">Fecha Inicio:</label>
            <div class="p-col-12">
              <p-calendar [(ngModel)]="date6" [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2030" [locale]="es" dateFormat="dd/mm/yy" class="ui-calendar "></p-calendar>
            </div>
          </div>
          <div class="p-field p-grid">
            <label for="fechaFin" class="p-col-12">Fecha fin:</label>
            <div class="p-col-12">
              <p-calendar [(ngModel)]="date" [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2030" [locale]="es" dateFormat="dd/mm/yy" class="ui-calendar"></p-calendar>
            </div>
          </div>
        </div>
      </div>
      <p-footer>
        <div class="alignIzquierda">
          <button type="button" pButton (click)="filtrar=false" label="Filtrar"></button>
        </div>
      </p-footer>
    </p-dialog>
  </div>

  <hr>

  <div class="p-grid p-justify-center" style="padding-top:1rem">
    <app-sm-plan-anual></app-sm-plan-anual>
  </div>

  <div class="p-col-12" style="padding:1rem" *ngFor="let p of perspectiva">
    <h2>{{p.code}}. {{p.name}}</h2>
    <hr>

    <div class="p-grid p-justify-center" style="padding:0">
      <ng-container *ngFor="let act of actividades">
        <div class="p-col-12 p-md-6 p-lg-4" *ngIf="p.code==act.cp">
          <p-card header="Actividad {{act.cp}}.{{act.co}}.{{act.ci}}.{{act.code}}"  styleClass="ui-card" [style]="{height: '100%'}">
            <hr>

            <div class="p-grid margen">
              <p for="actividad" class="p-col-12" style="font-weight: bold;">
                {{act.actividad|trimString}}
              </p>
            </div>
            <div class="p-grid margen">
              <div class="p-col-12 p-md-4 p-lg-4 p-xs-12">
                <label for="unidadResponsable">Unidad Responsable:</label>
              </div>
                <div class="p-col-12 p-md-8 p-lg-8 p-xs-12">
                  <p for="unidadResponsable" style="text-align:right">
                    {{act.responsable}}
                  </p>
                </div>
            </div>
            <div class="p-grid margen">
              <div class="p-col-12 p-md-4 p-lg-4 p-xs-12">
                <label for="fechaInicio">Fecha Inicio:</label>
              </div>
              <div class="p-col-12 p-md-8 p-lg-8 p-xs-12">
                <p for="fechaInicio" style="text-align:right">
                  {{act.fInicio}}
                </p>
              </div>
            </div>
            <div class="p-grid margen">
              <div class="p-col-12 p-md-4 p-lg-4 p-xs-12">
                <label for="fechaFin">Fecha Fin:</label>
              </div>
              <div class="p-col-12 p-md-8 p-lg-8 p-xs-12">
                <p for="fechaFin" style="text-align:right">
                  {{act.fFin}}
                </p>
              </div>
            </div>
            <p-footer>
              <a [routerLink]="['/listaActividades/detalleActividad']" class="layout-config-button" style="color: #3E59AB;"><i class="fa fa-eye"></i></a>
              <a class="layout-config-button" (click)="confirm2()" style="color: #B90B00;"><i class="fa fa-trash"></i></a>
            </p-footer>
          </p-card>
        </div>
      </ng-container>
    </div>

  </div>

  <p-confirmDialog [style]="{width: '40vw'}"></p-confirmDialog>

</div>
